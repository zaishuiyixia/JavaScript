<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Document</title>
  <style>
    ul,li{
      list-style:none;
    }
    .container{
      width: 600px;
      margin: 0 auto;
    }
    .container li{
      float: left;
      margin: 10px 10px;
    }
    .container li img{
      width: 240px;
      height: 180px;
    }
  </style>
</head>
<body>
  <ul class="container clearfix">
    <li><a href=""><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" data-src="http://cdn.jirengu.com/book.jirengu.com/img/1.jpg" alt=""></a></li>
    <li><a href=""><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"  data-src="http://cdn.jirengu.com/book.jirengu.com/img/2.jpg" alt=""></a></li>
    <li><a href=""><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"  data-src="http://cdn.jirengu.com/book.jirengu.com/img/3.jpg" alt=""></a></li>
    <li><a href=""><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"  data-src="http://cdn.jirengu.com/book.jirengu.com/img/4.jpg" alt=""></a></li>
    <li><a href=""><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"  data-src="http://cdn.jirengu.com/book.jirengu.com/img/5.jpg" alt=""></a></li>
    <li><a href=""><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"  data-src="http://cdn.jirengu.com/book.jirengu.com/img/6.jpg" alt=""></a></li>
    <li><a href=""><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"  data-src="http://cdn.jirengu.com/book.jirengu.com/img/7.jpg" alt=""></a></li>
    <li><a href=""><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"  data-src="http://cdn.jirengu.com/book.jirengu.com/img/8.jpg" alt=""></a></li>
    <li><a href=""><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"  data-src="http://cdn.jirengu.com/book.jirengu.com/img/9.jpg" alt=""></a></li>
    <li><a href=""><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"  data-src="http://cdn.jirengu.com/book.jirengu.com/img/10.jpg" alt=""></a></li>
    <li><a href=""><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"  data-src="http://cdn.jirengu.com/book.jirengu.com/img/11.jpg" alt=""></a></li>
    <li><a href=""><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"  data-src="http://cdn.jirengu.com/book.jirengu.com/img/12.jpg" alt=""></a></li>
    <li><a href=""><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"  data-src="http://cdn.jirengu.com/book.jirengu.com/img/13.jpg" alt=""></a></li>
    <li><a href=""><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"  data-src="http://cdn.jirengu.com/book.jirengu.com/img/14.jpg" alt=""></a></li>
    <li><a href=""><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"  data-src="http://cdn.jirengu.com/book.jirengu.com/img/15.jpg" alt=""></a></li>
    <li><a href=""><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"  data-src="http://cdn.jirengu.com/book.jirengu.com/img/16.jpg" alt=""></a></li>
    <li><a href=""><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"  data-src="http://cdn.jirengu.com/book.jirengu.com/img/17.jpg" alt=""></a></li>
    <li><a href=""><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"  data-src="http://cdn.jirengu.com/book.jirengu.com/img/18.jpg" alt=""></a></li>

  </ul>
  <script src="https://cdn.bootcss.com/jquery/1.9.1/jquery.js"></script>
  <script>

    // 用户第一次打开页面，还未滚动窗口的时候需要执行一次 lazyRender
    lazyRender();

    var clock;
    $(window).on('scroll',function(){
       //用户鼠标滚轮滚动一次，有多次事件响应。下面的 setTimeout 主要是为性能考虑，只在最后一次事件响应的时候执行 lazyRender，若在300毫秒内再次滚动则清除原来的定时器
      if(clock){
        clearTimeout(clock)
      }
      clock = setTimeout(function(){
        lazyRender();
      }, 300)
      
    })


    function lazyRender() {
      $('.container img').each(function(){
                //判断图片是否出现在可视窗口和图片是否已经加载
        if( checkShow($(this)) && !isLoaded($(this)) ){
                    //若图片出现在可是区域且没有加载，加载图片
          loadImg($(this))
        }
      })
    }

    //判断图片出没出现在可视窗口
    function checkShow($img) {
      //获取浏览器窗口高度
          var windowHeight = $(window).height(),
          //获取窗口滚动的高度
              windowScrolltop = $(window).scrollTop(),
          //获取图片到页面顶部的高度
              imgOffsettop = $img.offset().top,
          //获取图片元素自己的高度,包括内外边距
              imgHeight = $img.outerHeight(true);
      if(windowHeight + windowScrolltop > imgOffsettop && imgOffsettop + imgHeight > windowScrolltop){
            return true
          }
          return false 
      }

    //判断图片加没加载过
    function isLoaded($img) {
      return $img.attr('data-src') === $img.attr('src')
    }
                
        //加载图片
    function loadImg($img) {
      $img.attr('src',$img.attr('data-src'))
    }
  </script>
</body>
</html>
